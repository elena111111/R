Алгоритм парзеновского окна с переменной шириной окна (varpw).
Имеется выборка X (ирисы Фишера), и 3 класса (setosa, versicolor, virginica). 
Мы хотим классифицировать множество точек {z}.
Классификацию проводим по двум признакам (Petal.Length, Petal.Width), они же являются координатами точек.
distances - это вектор расстояний от точки z до каждой точки из выборки X.
orderedxl - это массив xl, отсортированный по возрастанию расстояний от точки z до каждой точки из выборки X.
distances_s - отсортированный вектор расстояний.
weights - вектор весов для k ближайших соседей.
Для весовой функции нам нужно выбрать ядро(в примере работы программы используется прямоугольное).
Аргумент ядра - расстояние от z до i-го соседа точки z (i от 1 до k), деленое на расстояние от z до (k+1)-го соседа.

Возьмем из orderedxl первые k строк, допишем к ним соответствующие веса и оставим только столбцы названий классов и весов - получим массив classes.
Ответом будет тот класс, суммарный вес которого максимален в classes. 

Данный метод подходит для неравномерно распределенной выборки.
Разница в результатах работы программ с постоянным и переменным окном наиболее заметна при выборе прямоугольного ядра.